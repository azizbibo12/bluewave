<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Blue-Wave Ù…Ø¨Ø§Ø´Ø±</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{margin:0;font-family:Arial;background:#0e0e0e;color:#fff;text-align:center}
    header{background:#1f1f1f;padding:10px;font-size:1.2em}
    #tv-container{height:65vh;width:100%}
    #controls{padding:15px}
    button{padding:10px 20px;border:none;border-radius:4px;background:#4caf50;color:#fff;font-size:1em;cursor:pointer}
    #status{margin-top:10px;font-size:0.9em;color:#4caf50}
    nav a{color:#4caf50;margin:0 8px;text-decoration:none;font-weight:bold}
  </style>
</head>
<body>
  <header>ğŸ“ˆ Blue-Wave Ù…Ø¨Ø§Ø´Ø± | BTC</header>
  <nav>
    <a href="?page=settings">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a>
    <a href="?page=history">ğŸ“Š Ø§Ù„Ø³Ø¬Ù„</a>
  </nav>

  <div id="controls">
    <button id="copyBtn">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø£ÙˆØ§Ù…Ø±</button>
    <div id="status"></div>
  </div>

  <!-- Ø´Ø§Ø±Øª TradingView -->
  <div id="tv-container"></div>

  <script src="https://s3.tradingview.com/tv.js"></script>
  <script>
    // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    const settings = JSON.parse(localStorage.getItem('bwSettings')) || {};
    const symbol = settings.symbol || 'BINANCE:BTCUSDT.P';

    // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¥Ø´Ø§Ø±Ø©
    let lastDir = 'LONG', lastEntry = 28500, lastSL = 28200, lastTP = 29100;

    // Ø±Ø¨Ø· Ø§Ù„Ø´Ø§Ø±Øª
    new TradingView.widget({
      container_id: "tv-container",
      symbol: symbol,
      interval: "5",
      theme: "dark",
      locale: "ar",
      toolbar_bg: "#1f1f1f",
      enable_publishing: false,
      studies: ["BlueWave@tv-basicstudies"],
      withdateranges: true,
      show_popup_button: true,
      no_referral_id: true
    });

    // Ù†Ø³Ø® Ø§Ù„Ø£ÙˆØ§Ù…Ø±
    document.getElementById('copyBtn').addEventListener('click', () => {
      const text = `Ø§Ù„Ø§ØªØ¬Ø§Ù‡: ${lastDir}\nØ§Ù„Ø¯Ø®ÙˆÙ„: $${lastEntry}\nSL: $${lastSL}\nTP: $${lastTP}`;
      navigator.clipboard.writeText(text).then(() => {
        document.getElementById('status').innerText = 'âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®!';
        setTimeout(() => document.getElementById('status').innerText = '', 2000);
      });
    });

    // Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø´Ø§Ø±Ø© (ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ø¨Ù€Webhook Ù„Ø§Ø­Ù‚Ø§Ù‹)
    setTimeout(() => {
      lastDir   = Math.random() > 0.5 ? 'LONG' : 'SHORT';
      lastEntry = Math.round(Math.random() * 1000 + 28000);
      lastSL    = lastEntry - 300;
      lastTP    = lastEntry + 900;
      document.getElementById('status').innerText = `Ø¥Ø´Ø§Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø©: ${lastDir}`;
    }, 4000);
  </script>
</body>
</html>
